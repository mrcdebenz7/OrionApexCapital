"use strict";(()=>{var e={};e.id=91,e.ids=[91],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6326:e=>{e.exports=import("resend")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},450:(e,t,r)=>{r.r(t),r.d(t,{config:()=>f,default:()=>d,routeModule:()=>p});var n={};r.r(n),r.d(n,{default:()=>l});var o=r(1802),s=r(7153),a=r(6249);function i(e,t,r={}){let n={ts:new Date().toISOString(),level:e,message:t,...function e(t){try{let r=JSON.parse(JSON.stringify(t||{})),n=["message","text","password","token","apiKey"];for(let t of Object.keys(r))n.includes(t)&&(r[t]="[redacted]"),"object"==typeof r[t]&&(r[t]=e(r[t]));return r}catch(e){return{}}}(r)};console["error"===e?"error":"warn"===e?"warn":"log"](JSON.stringify(n))}let c={info:(e,t)=>i("info",e,t),warn:(e,t)=>i("warn",e,t),error:(e,t)=>i("error",e,t)},u=new Map;async function l(e,t){if("POST"!==e.method)return t.status(405).json({ok:!1,error:"Method not allowed"});let n=e.headers["x-forwarded-for"]?.split(",")[0]?.trim()||e.socket.remoteAddress||"unknown";if(function(e){let t=Date.now(),r=u.get(e)||{count:0,start:t};return t-r.start>6e4&&(r.count=0,r.start=t),r.count+=1,u.set(e,r),r.count>10}(n))return c.warn("Rate limited contact",{ip:n}),t.status(429).json({ok:!1,error:"Too many requests"});try{let{name:o,email:s,message:a}=e.body||{},i=[];if((!o||o.length<2||o.length>120)&&i.push("name"),s&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)&&!(s.length>200)||i.push("email"),(!a||a.length<10||a.length>5e3)&&i.push("message"),i.length)return t.status(400).json({ok:!1,error:"Invalid fields",fields:i});if(process.env.RESEND_API_KEY&&process.env.CONTACT_TO_EMAIL){let{Resend:e}=await Promise.resolve().then(r.bind(r,6326)),t=new e(process.env.RESEND_API_KEY);await t.emails.send({from:"contact@orionapexcapital.com",to:process.env.CONTACT_TO_EMAIL,subject:`New Contact â€” ${o}`,text:`From: ${o} <${s}>

${a}`}),c.info("Contact email sent",{ip:n,email:s})}else c.info("Contact logged (no email configured)",{ip:n,email:s}),console.log("[contact]",{name:o,email:s,message:a});t.status(200).json({ok:!0})}catch(e){c.error("Contact handler error",{error:String(e)}),t.status(500).json({ok:!1,error:"Internal error"})}}let d=(0,a.l)(n,"default"),f=(0,a.l)(n,"config"),p=new o.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/contact",pathname:"/api/contact",bundlePath:"",filename:""},userland:n})},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=450);module.exports=r})();